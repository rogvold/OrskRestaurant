CONSOLE_NONE=0;CONSOLE_ERROR=1;CONSOLE_WARN=2;CONSOLE_INFO=3;CONSOLE_DEBUG=4;CONSOLE_LOG=5;CONSOLE_ALL=9;var u=function(a){function b(a){return function(){d!==0&&(c&&c[a])&&c[a].apply(c,arguments)}}function e(b,e){return function(){var i=
Array.prototype.slice.call(arguments);f.push([b].concat(i));c[b]||(b="log");p&&(n||!c||!c.log)&&p.apply(a,arguments);if(c&&(d>0?d>e:k.length+d<=e))try{if(c[b].apply){i.splice(0,0,q);c[b].apply(c,i)}else if(g)c[b].call(c,q+" "+i.join(" "));else c[b](q+" "+i.join(" "))}catch(l){}}}var d=CONSOLE_NONE,c=a.console||{},g=/(iphone|ipad|ipod|android)/.test(navigator.userAgent.toLowerCase()),i={},f=[],p,n,q,k=["error","warn","info","debug","log"],t=["assert","clear","count","dir","dirxml","exception","group",
"groupCollapsed","groupEnd","profile","profileEnd","table","time","timeEnd","trace"],s=0,v=0,o;c.clear&&c.clear();for(v=t.length;s<v;s++){o=t[s];i[o]=b(o)}s=0;for(v=k.length;s<v;s++){o=k[s];i[o]=e(o,s)}i.getLogs=function(){return f};i.setCallback=function(a,b){p=a;n=!!b};i.setLevel=function(a){d=Number(a)};i.setPrefix=function(a){q=a};return i}(window);window.debug=u;(function(a){function b(a,b){var l=/^\w+\:\/\//,d;typeof a!=c&&(a="");typeof b!=c&&(b="");d=(l.test(a)?"":
b)+a;return(l.test(d)?"":"/"===d.charAt(0)?qa:va)+d}function e(d,i){function va(a,b){if(a[p]&&a[p]!==s&&"loaded"!==a[p]||b[v])return m;a[C]=a[r]=y;return x}function K(a,b,c){if(c||va(a,b)){b[v]=x;for(var d in ja)if(ja[l](d)&&!ja[d][v])return;aa=x;ia()}}function N(a){A.call(a[q])===F&&(a[q](),a[q]=y)}function O(a,b){va(a,b)&&(b[g]=x,B(function(){Q[b[o]].removeChild(a);N(b)},0))}function L(a,b){4===a[p]&&(a[r]=ca,b[g]=x,B(function(){N(b)},0))}function E(a,b,l,d,e,k){var i=a[o];B(function(){if("item"in
Q[i]){if(!Q[i][0]){B(arguments.callee,25);return}Q[i]=Q[i][0]}var D=n.createElement(f);typeof l==c&&(D.type=l);typeof d==c&&(D.charset=d);A.call(e)===F&&(D[C]=D[r]=function(){e(D,a)},D.src=b,M&&(D.async=m));Q[i].insertBefore(D,i===h?Q[i].firstChild:y);typeof k==c&&(D.text=k,K(D,a,x))},0)}function W(a,b,c,l){wa[a[k]]=x;E(a,b,c,l,K)}function X(a,b,c,l){var d=arguments;oa&&a[g]==y?(a[g]=m,E(a,b,D,l,O)):!oa&&a[g]!=y&&!a[g]?a[q]=function(){X.apply(y,d)}:oa||W.apply(y,d)}function Z(b,c,l,d){var e=arguments,
f;oa&&b[g]==y?(b[g]=m,f=b.xhr=u?new u("Microsoft.XMLHTTP"):new a.XMLHttpRequest,f[r]=function(){L(f,b)},f.open("GET",c),f.send("")):!oa&&b[g]!=y&&!b[g]?b[q]=function(){Z.apply(y,e)}:oa||(wa[b[k]]=x,E(b,c,l,d,y,b.xhr.responseText),b.xhr=y)}function U(a){a.allowDup==y&&(a.allowDup=i.dupe);var l=a.type,d=a.charset,e=a.allowDup,a=b(a.src,ma),f=0===b(a).indexOf(qa);typeof d!=c&&(d=y);if(e=!e)if(!(e=wa[a]!=y))if(!(e=oa&&ja[a]))a:{for(var h=-1;e=I[++h];)if(typeof e.src==c&&a===b(e.src)&&e.type!==D){e=x;
break a}e=m}e?ja[a]!=y&&(ja[a][g]&&!ja[a][v]&&f)&&K(y,ja[a],x):(ja[a]==y&&(ja[a]={}),e=ja[a],e[o]==y&&(e[o]=la),e[v]=m,e[k]=a,ka=x,!da&&ga&&f?Z(e,a,l,d):!da&&wc?X(e,a,l,d):W(e,a,l,d))}function V(a){d&&!da&&ea.push(a);(!d||P)&&a()}function Y(a){var b=[],c;for(c=-1;++c<a.length;)A.call(a[c])===H?b=b.concat(Y(a[c])):b[b.length]=a[c];return b}d=!!d;i==y&&(i=J);var aa=m,P=d&&i[t],wc=P&&i.cache,da=P&&i.order,ga=P&&i.xhr,ha=i[G],la=i.which,ma=i.base,ia=ca,ka=m,R,oa=x,ja={},ea=[],S=y,P=wc||ga||da;R={script:function(){z(S);
var a=Y(arguments),b=R,l;if(ha)for(l=-1;++l<a.length;)0===l?V(function(){U(typeof a[0]==c?{src:a[0]}:a[0])}):b=b.script(a[l]),b=b.wait();else V(function(){for(l=-1;++l<a.length;)U(typeof a[l]==c?{src:a[l]}:a[l])});S=B(function(){oa=m},5);return b},wait:function(a){z(S);oa=m;A.call(a)!==F&&(a=ca);var b=e(x,i),c=b.trigger,l=function(){try{a()}catch(b){}c()};delete b.trigger;var f=function(){ka&&!aa?ia=l:l()};d&&!ka?ea.push(f):V(f);return b}};d&&(R.trigger=function(){for(var a,b=-1;a=ea[++b];)a();ea=
[]});return R}function d(a){var b,c={},d={UseCachePreload:"cache",UseLocalXHR:"xhr",UsePreloading:t,AlwaysPreserveOrder:G,AllowDuplicates:"dupe"},e={AppendTo:o,BasePath:"base"};for(b in d)e[b]=d[b];c.order=!!J.order;for(b in e)e[l](b)&&J[e[b]]!=y&&(c[e[b]]=a[b]!=y?a[b]:J[e[b]]);for(b in d)d[l](b)&&(c[d[b]]=!!c[d[b]]);c[t]||(c.cache=c.order=c.xhr=m);c.which=c.which===h||c.which===i?c.which:h;return c}var c="string",h="head",i="body",f="script",p="readyState",g="preloaddone",q="loadtrigger",k="srcuri",
t="preload",s="complete",v="done",o="which",G="preserve",r="onreadystatechange",C="onload",l="hasOwnProperty",D="script/cache",F="[object Function]",H="[object Array]",y=null,x=!0,m=!1,n=a.document,u=a.ActiveXObject,B=a.setTimeout,z=a.clearTimeout,A=Object.prototype.toString,ca=function(){},Q={},wa={},va=/^[^?#]*\//.exec(a.location.href)[0],qa=/^\w+\:\/\/\/?[^\/]+/.exec(va)[0],I=n.getElementsByTagName(f),K=a.opera&&"[object Opera]"==A.call(a.opera),N="MozAppearance"in n.documentElement.style,M=!0===
n.createElement(f).async,J={cache:!(N||K),order:N||K||M,xhr:x,dupe:x,base:"",which:h};J[G]=m;J[t]=x;Q[h]=n.head||n.getElementsByTagName(h);Q[i]=n.getElementsByTagName(i);a.$LAB={setGlobalDefaults:function(a){J=d(a)},setOptions:function(a){return e(m,d(a))},script:function(){return e().script.apply(y,arguments)},wait:function(){return e().wait.apply(y,arguments)}};(function(a,b,c){n[p]==y&&n[a]&&(n[p]="loading",n[a](b,c=function(){n.removeEventListener(b,c,m);n[p]=s},m))})("addEventListener","DOMContentLoaded")})(window);(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.MingClass=function(){};MingClass.extend=function(e){function d(){!a&&this.init&&this.init.apply(this,arguments)}var c=this.prototype;
a=true;var h=new this;a=false;for(var i in e)h[i]=typeof e[i]=="function"&&typeof c[i]=="function"&&b.test(e[i])?function(a,b){return function(){var d=this._super;this._super=c[a];var e=b.apply(this,arguments);this._super=d;return e}}(i,e[i]):e[i];d.prototype=h;d.constructor=d;d.extend=arguments.callee;return d}})();XHR=function(){function a(a){try{return JSON.parse(a)}catch(b){return a}}function b(b,d,c,h,i,f){var p=/^(\w+:)?\/\/([^\/?#]+)/.exec(d),p=p&&(p[1]&&p[1].toLowerCase()!==location.protocol||p[2].toLowerCase()!==location.host),g=window.XDomainRequest&&p?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(f==="script"&&b==="GET"&&p){var q=document.getElementsByTagName("head")[0]||document.documentElement,k=document.createElement("script"),
t=false;k.src=d;k.onload=k.onreadystatechange=function(){if(!t&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){t=true;k.onload=k.onreadystatechange=null;q&&k.parentNode&&q.removeChild(k)}};q.insertBefore(k,q.firstChild);return true}g.open(b,d,!!h);if(g.setRequestHeader){g.setRequestHeader("Content-Type","application/x-www-form-urlencoded");p||g.setRequestHeader("X-Requested-With","XMLHttpRequest")}if(i)g.withCredentials=true;if(h)g.onreadystatechange=function(){g.readyState===
4&&h.call(g,a(g.responseText),g.status)};g.send(c);return h?true:a(g.responseText)}this.get=function(a,d){return b("GET",a,null,d)};this.getWithCredentials=function(a,d){return b("GET",a,null,d,true)};this.getJson=function(a,d){return b("GET",a,null,null,d,"script")};this.post=function(a,d,c){return b("POST",a,d,c)};this.postWithCredentials=function(a,d,c){return b("POST",a,d,c,true)};this.request=b};window.XHR=XHR;ICanHas=function(a,b){return{cors:function(){var a=b.XDomainRequest||b.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;if(a){a=new Boolean(a);a.withCredentials=!window.XDomainRequest}return a}(),orientation:window.orientation!==void 0,touch:"ontouchstart"in b,video:function(){var b=a.createElement("video"),d=!!b.canPlayType;
if(d){d=new Boolean(d);d.vp6=b.canPlayType('video/x-flv; codecs="vp6"')||false;d.vp8=b.canPlayType('video/webm; codecs="vp8,vorbis"')||false;d.h264=navigator.userAgent.toLowerCase().search("android")>-1?"probably":b.canPlayType('video/mp4; codecs="avc1.42E01E"')||b.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')||false}return d}()}}(document,window);FlashDetect=function(){var a=navigator,b=false,e=0,d=0,c=0,g=null,
i=null;if(a.plugins&&a.plugins.length){if((a=a.plugins["Shockwave Flash"])&&a.description){g=a.description;b=true}}else if(a.mimeTypes&&a.mimeTypes.length)(a=a.mimeTypes["application/x-shockwave-flash"])&&a.enabledPlugin&&(b=true);else try{g=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version");b=true}catch(f){}if(g){i=g.replace(/\D+/g,".").replace(/^\./,"");a=i.split(".");e=parseInt(a[0],10);d=parseInt(a[1],10);c=parseInt(a[2],10)}return{installed:b,raw:g,version:i,major:e,
minor:d,revision:c,versionAtLeast:function(a,b,f){var a=a||10,b=b||0,f=f||0,g=[e,d,c],h=arguments,i=Math.min(g.length,h.length),n;for(n=0;n<i;n++)if(g[n]>=h[n]){if(!(n+1<i&&g[n]===h[n]))return true}else return false}}}();$m={};(function(a){function b(b,c,d){if(a.type(d)!=="array"||d===f)d=[d];for(var e=0,h=d.length;e<h;e++)d[e][b]||(d[e][b]=c);a[b]=function(){var a=Array.prototype.slice.call(arguments),b=a.shift();return c.apply(b,a)}}function e(a,b,c,d){c[a]=b;d.push(a);d.length>1E3&&delete c[d.shift()];return b}function d(){var a=
this.valueOf();return a<0?~~a-1:~~a}function c(a,b){return this<b?a>this?a:this:b}function h(a,b){var c=this.valueOf()+"";return Array(a-c.length+1).join(b||"0")+c}if(!window.Element)window.Element={};for(var i=document,f=Array.prototype,g=!window.HTMLElement?{}:HTMLElement.prototype,n=!window.NodeList?{}:NodeList.prototype,q=Number.prototype,k=String.prototype,t=window,s={},v=[],o=["Boolean","Number","String","Function","Array","Date","RegExp","Object"],G=[],r=0,C=o.length;r<C;r++)G["[object "+o[r]+
"]"]=o[r].toLowerCase();a.type=function(a){return a==null?""+a:G[Object.prototype.toString.call(a)]||"object"};a.isArray=function(b){return a.type(b)==="array"};a.emptyFunction=function(){};a.clone=function(b){var c=a.isArray(b)?[]:{};for(r in b)r!=="clone"&&(c[r]=b[r]&&a.type(b[r])==="object"?a.clone(b[r]):b[r]);return c};a.addEventListener=function(a,b,c){window.addEventListener?a.addEventListener(b,c,false):a.attachEvent("on"+b,c)};a.removeEventListener=function(a,b,c){window.removeEventListener?
a.removeEventListener(b,c,false):a.detachEvent("on"+b,c)};a.findKey=function(a,b){for(var c in b)if(b.hasOwnProperty(c)&&b[c]===a)return c;return false};a.fibonacci=function(a){var b=Math.sqrt(5);return(1/b*Math.pow((1+b)/2,a)-1/b*Math.pow((1-b)/2,a)).round()};a.withinElement=function(a,b){var c=b.relatedTarget;try{if(c&&c!==document&&!c.parentNode)return true;for(;c&&c!==a;)c=c.parentNode;if(c!==a)return false}catch(d){}return true};b("abs",function(){var a=this.valueOf();return a<0?-a:a},q);b("addClass",
function(b){if(this.length&&this.forEach)this.forEach(function(c){a.addClass(c,b)});else if(!a.hasClass(this,b))this.className=this.className.split(" ").concat(b).unique().join(" ").trim();return this},[g,n]);b("attr",function(b,c){if(a.type(b)==="object"){for(prop in b)b[prop]===null||b[prop]===""?this.removeAttribute(prop):this.setAttribute(prop,b[prop]);return this}if(c===void 0)return this.getAttribute(b);c===null||c===""?this.removeAttribute(b):this.setAttribute(b,c);return this},g);b("ceil",
function(){return d.call(this.valueOf()+1)},q);b("clamp",function(a,b,c){function d(){if(checkCount>200)return false;if(e.innerText!=a||e[property]==0){checkCount++;setTimeout(d,1)}else a:if(!(e[property]<=c)){for(;e[property]>c;){e.innerText=e.innerText.substr(0,e.innerText.length-1);if(e.innerText==""||e.innerText.length==0)break a}e.innerText=e.innerText.substr(0,e.innerText.length-3)+"..."}}var e=this;e.innerHTML=a;property=b=="height"?"clientHeight":"clientWidth";checkCount=0;d();return e},g);
b("clear",function(){this.childNodes.forEach(function(a){a.remove&&a.remove()});return this},g);b("computeStyle",function(a){if(!t.getComputedStyle)t.getComputedStyle=function(a){this.el=a;this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;b=="float"&&(b="styleFloat");c.test(b)&&(b=b.replace(c,function(a,b,c){return c.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this};return t.getComputedStyle(this,null).getPropertyValue(a)},g);b("contains",function(a){return this.indexOf(a)!==
-1},[f,k]);b("css",function(b,c){if(a.type(b)==="object"){for(prop in b)this.style[prop]=b[prop];return this}if(c===void 0)return this.style[b];this.style[b]=c===null||c===""?"":c;return this},g);b("floor",d,q);b("forEach",function(b,c){if(a.type(b)==="function")for(var d=this.length>>>0,e=0;e<d;e++)e in this&&b.call(c,this[e],e,this)},[f,n]);b("getElementsByClassName",function(a){var b=[],c=0,d,e;if(document.evaluate)for(d=document.evaluate(".//*[contains(concat(' ', @class, ' '), ' "+a+" ')]",this,
null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);e=d.snapshotItem(c++);)b[b.length]=e;else{c=RegExp("(^|\\s)"+a+"(\\s|$)");d=this.getElementsByTagName("*");for(var f=0,h=d.length;f<h;f++){e=d[f];if(e.className===a||c.test(e.className))b[b.length]=e}}return b},i);b("hasAncestor",function(a){if(a===this)return true;for(var b=this.parentNode;b;){if(b===a)return true;b=b.parentNode}return false},g);b("hasClass",function(a){if(a.splice){for(var b=this.className.split(" "),c=0,d=b.length;c<d;c++)if(a.contains(b[c]))return true;
return false}return RegExp("(?:^|\\s+)"+a+"(?:\\s+|$)").test(this.className)},g);b("hex2rgb",function(){if(cached=this in s?s[this]:false)return cached;var a=parseInt(this.replace("#",""),16),a=[(a&16711680)>>16,(a&65280)>>8,a&255];return e(this,"rgb("+a.join(",")+")",s,v)},k);b("html",function(a){if(a===void 0)return this.innerHTML;this.innerHTML=a;return this},g);b("indexOf",function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a)return b;return-1},f);b("innerHeight",function(){for(var b=0,
c,d=0,e=this.childNodes.length;d<e;d++){c=this.childNodes[d];c.style&&(b=b+(c.clientHeight+(a.toInt(a.computeStyle(c,"margin-top"),10)||0)+(a.toInt(a.computeStyle(c,"margin-bottom",10))||0)))}return b},g);b("limit",c,q);b("map",function(a,b){for(var c=this.length>>>0,d=Array(c),e=0;e<c;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d},f);b("max",function(){return Math.max.apply(Math,this)},f);b("min",function(){return Math.min.apply(Math,this)},f);b("pad",h,[k,q]);b("position",function(){var a=
0,b=0,c=this;if(c.offsetParent){do{a=a+c.offsetLeft;b=b+c.offsetTop}while(c=c.offsetParent)}return{x:a,y:b}},g);b("prependChild",function(a){return this.insertBefore(a,this.firstChild)},g);b("q",function(a){return this.querySelector(a)},[i,g]);b("qa",function(a){return this.querySelectorAll(a)},[i,g]);b("remove",function(){this.length?this.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}):this.parentNode&&this.parentNode.removeChild(this)},[g,n]);b("removeClass",function(b){if(this.length&&
this.forEach)this.forEach(function(c){a.removeClass(c,b)});else if(a.hasClass(this,b))this.className=this.className.replace(RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," ").trim();return this},[g,n]);b("rgb2hex",function(){if(cached=this in s?s[this]:false)return cached;var a=this.match(/\d{1,3}/g).slice(0,3),a=a.map(function(a){return h.call(c.call(parseInt(a,10),0,255).toString(16),2)});return e(this,a.join(""),s,v)},k);b("round",function(){return d.call(this.valueOf()+0.5)},q);b("toInt",function(a){return parseInt(this.valueOf?
this.valueOf():this,a||10)},[k,q]);b("toFloat",function(a){return parseFloat(this.valueOf(),a||10)},[k,q]);b("trim",function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},k);b("ucfirst",function(){return this.charAt(0).toUpperCase()+this.slice(1)},k);b("unique",function(){var a=[],b=0,c=this.length;a:for(;b<c;b++){for(var d=0,e=a.length;d<e;d++)if(a[d]===this[b])continue a;a[a.length]=this[b]}return a},f);b("wrap",function(b,c){var d=this,e=a.addClass(document.createElement(b),c||"");d.length||
(d=Array(this));d.forEach(function(a,b){b===0&&a.parentNode.replaceChild(e,a);e.appendChild(a)});return e},[g,n])})($m);EventManager=function(){function a(a){if(!b[a]){var c=document.createElement("a");c.id="Event:"+a;e.appendChild(c);b[a]=c}return b[a]}var b={},e=document.createElement("div");e.id="events"+(new Date).getTime();document.body.appendChild(e);this.bind=function(b,c){var e=a(b);window.addEventListener?e.addEventListener("click",c,false):e.attachEvent("onclick",c);return this};this.unbind=function(b,c){var e=a(b);window.removeEventListener?
e.removeEventListener("click",c,false):e.detachEvent("onclick",c);return this};this.fire=function(b,c){var e,g=a(b);if(document.createEvent){e=document.createEvent("HTMLEvents");e.initEvent("click",false,true);e.name=b;e.data=c;return g.dispatchEvent(e)}try{c=JSON.stringify(c)}catch(f){}e=document.createEventObject();e.name=b;e.data=c;return g.fireEvent("onclick",e)}};window.EventManager=EventManager;var xa="ming",ya="moogaloop",Ka="noplayer",Ya="nomobile",na="mobile",Ja="touch",Ta="desktop",ic="html",hc="flash",Y="hd",Da="sd",S="mobile",kc=[Y,Da,S],Ic="pl_volume",ec="hd_preference",Jc="scaling_preference",ta="onwebkittransitionend"in window?
"webkitTransitionEnd":"transitionEnd",wb=8,Kc=250,fc=140,gc=200,Lc=265,Hb=7,Ob=1.5,lc=2E3,jc=1500,ma=1,Aa=2,Eb=3,K=4,J=5,la=6,Jb=7,yb=8,db=9,Xb=10,Zb=11,Wb=12,Yb=13,Pb=14,Mb=15,kb=16,mc=17,Rb=18,Sb=19,Nb=20,nc=21,Tb=22,Ub=23,I=24,W=25,cb=26,Oa=27,Ib=28,N=29,Fb=30,oc=31,da=32,lb=33,mb=34,Ba=35,Vb=36,gb="loadProgress",hb="playProgress",fb="play",eb="pause",xb="finish",jb="seek",rb="ready",Gc="error",Za="addEventListener()",$a="removeEventListener()",ob="play()",nb="pause()",pb="seekTo()",qb="unload()",
Ea="setColor()",Ra="setLoop()",Sa="setVolume()",ha="getDuration()",ga="getCurrentTime()",Fa="getVolume()",Bb="getColor()",zb="getLoop()",vb="getVideoUrl()",$b="getVideoEmbedCode()",Pa="getVideoWidth()",Qa="getVideoHeight()",ia="paused()",aa="a",Mc="bf",Lb="ab",Nc="cd",Wa="as",Va="au",n="br",B="an",Ab="bn",Na="ae",Cc="h",Dc="l",Ec="m",Fc="n",pc="bc",Oc="p",La="w",sa="v",Cb="aa",Ma="r",ea="k",Xa="x",Ca="j",Ua="bo",ub="bi",xc="cs",yc="z",tb="cf",zc="av",Ac="bl",ua="ce",Ia="dc",Pc="bd",X="b",ac="h",bc=
"ar",qc="i",Qc="bt",Rc="be",ab="aq",Sc="af",Tc="m",Ma="r",Uc="aw",Vc="ag",P="e",O="d",za="aj",pa="cm",bb="bz",rc="bp",Wc="q",Xc="videos",Yc="ay",dc="bj",Ga="t",Zc="bs",sc="bq",M="l",cc="s",$c="bv",tc="am",ad="ch",uc="ca",Bc="by",Hc="cl";var g=MingClass.extend({init:function(a,b,e){function d(){if(!ICanHas.video||p.ie||p.safari&&4>p.safari)return!1;for(var a in c.config.video.files)if(ICanHas.video[a])return!0;return!1}var c=this,h=b.assets,i,f;i=navigator;f=i.userAgent.toLowerCase();i=i.platform.toLowerCase();var p={webkit:"webkitAppearance"in
document.documentElement.style?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,firefox:/firefox/.test(f)?f.replace(/^.*firefox\/(\d+\.\d+\.\d+).*$/,"$1"):!1,safari:/safari/.test(f)?parseFloat(f.replace(/^.*version\/(\d+)\.(\d+)?.*$/,"$1.$2")):!1,ie:"Microsoft Internet Explorer"==navigator.appName,opera:window.opera&&"[object Opera]"=={}.toString.call(window.opera)||!1,silk:/silk/.test(f),win:i?/win/.test(i):/win/.test(f),mac:/mac/.test(i||f)?parseFloat(f.replace(/^.* ((\d+)(_|\.)?(\d+)?).*$/,
"$2.$4")):!1,linux:i?/linux/.test(i):/linux/.test(f),android:/android/.test(f)?parseFloat(f.replace(/^.* android (\d+)\.(\d+).*$/,"$1.$2")):!1,playBook:/playbook/.test(f)};c.element=a;c.config=b.config;c.playerType=null;c.playerMode=null;c.playableFiles=null;c.thumbs=b.thumbs;c.api=!1;c.ua=p;c.uniqueId=b.uniqueId;g.cookieDomain=c.config.request.cookie_domain;c.playerMode=function(){if(c.playerMode)return c.playerMode;var a=Ta;480>=Math.min(screen.width,screen.height)||"1"==g.getCookie("test_mobiloop")||
p.android&&3>p.android||p.silk?a=na:ICanHas.orientation&&(a=Ja);return a}();c.playableFiles=function(){var a=c.config.video,b=a.files,d={hd:!1,sd:!1,mobile:!1},e;for(e in b)if(ICanHas.video[e]){if(c.playerMode===na){$m.contains(b[e],S)?d.mobile=e:g.mobileCanPlaySD()&&$m.contains(b[e],Da)&&(d.sd=e);break}for(var f=0,h=b[e].length;f<h;f++){var i=b[e][f];i===Y&&!d.hd?d.hd=e:i===Da&&!d.sd?d.sd=e:i===S&&!d.mobile&&(d.mobile=e)}}c.config.security.hd_embed||(d.hd=!1);c.playerMode===Ja&&921600<a.height*a.width&&
(u.info("Can't play HD version on iPad: too big"),d.hd=!1,c.config.video.hd=!1);return d}();c.playerType=function(a){var b=Ka;switch(a){case hc:b=FlashDetect.installed&&10<=FlashDetect.major?ya:d()?xa:b;break;case ic:b=c.playerMode!==na&&!c.playableFiles.hd&&!c.playableFiles.sd?FlashDetect.installed&&10<=FlashDetect.major?ya:c.playableFiles.mobile?xa:b:d()?xa:FlashDetect.installed&&10<=FlashDetect.major?ya:b}if(c.playerMode===na&&!c.playableFiles.mobile){var e;a:{a=c.config.video.files;for(e in a)if($m.contains(a[e],
S)){e=!0;break a}e=!1}b=e?Ka:g.mobileCanPlaySD()&&c.playableFiles.sd?xa:Ya}return b}(1===c.config.request.cookie.html?ic:hc);f=c.playerType===ya?h.moogaloop:h.ming[c.playerMode].js;i=c.playerType===ya?[]:h.ming[c.playerMode].css;u.info("Player Type:",c.playerType);u.info("Player Mode:",c.playerMode,Math.min(screen.width,screen.height));u.info("Screen Size:",screen.width,"x",screen.height);u.info("Can play:",ICanHas.video.h264?"h264":"");u.info("Playable Files:",c.playableFiles.hd?"hd":"",c.playableFiles.sd?
"sd":"",c.playableFiles.mobile?"mobile":"");c.setThumb();null===c.config.request.cookie.hd&&(c.config.request.cookie.hd=c.config.video.default_to_hd);var ba=g.getTimeOffset(document.location.hash);0<ba&&(c.config.embed.time=ba,c.config.embed.autoplay=1,-1<document.location.hash.indexOf("at=")&&(document.location.hash=""));$m.forEach(i,function(a){var b=document.createElement("link");$m.attr(b,{rel:"stylesheet",href:h.css_path+a+(!h.cache?(a.indexOf("?")>-1?"&":"?")+(new Date).getTime():"")});document.getElementsByTagName("head")[0].appendChild(b)});
i=$LAB.setOptions({AlwaysPreserveOrder:!0,BasePath:h.js_path});h.cache||(f=$m.map(f,function(a){return a+(a.indexOf("?")>-1?"&":"?")+(new Date).getTime()}));i.script(f).wait(function(){c.api=new g.API(c.config);playerElement=a.getElementsByTagName("div")[0];$m.addClass(playerElement,c.playerType===ya?Bc:aa);c.player=new (c.playerType===ya?g.Moogaloop:c.playerType===Ka||c.playerType===Ya?g.NoPlayer:g.Ming)(playerElement,b.options[c.playerType===Ya?Ka:c.playerType],c);e&&e.call(c)});u.info("Reticulating splines...")},
getConfig:function(){return this.config},setConfig:function(a){this.config=a},setThumb:function(){var a=this.element.getElementsByTagName("div")[0].getElementsByTagName("div")[0].getElementsByTagName("div")[0],b=a.getAttribute("data-thumb"),e=this.thumbs[640],d=this.element.clientWidth;900<=d&&(e=this.thumbs[960]);1E3<=d&&(e=this.thumbs[1280]);this.config.video.thumbnail=e;if(b!==e&&this.playerType===xa){if(0===this.config.embed.autoplay||this.playerMode!==Ta)a.style.backgroundImage="url("+e+")";
a.setAttribute("data-thumb",e)}}});g.setCookie=function(a,b,e,d){var c=document.getElementById(Cc),h="",e=e||87600,d=d||g.cookieDomain;c?(document.getElementById(Dc).value=a,document.getElementById(Ec).value=b,document.getElementById(Fc).value=e,window.addEventListener("message",function(a){"refresh"==a.data&&g.xhrRefresh()},!1),c.submit()):(e&&(c=new Date,c.setTime(c.getTime()+36E5*e),h="; expires="+c.toGMTString()),document.cookie=a+"="+b+h+"; path=/"+("; domain="+d))};g.getCookie=function(a){var b=
document.cookie,a=a+"=",e;if(b&&""!==b)for(var b=document.cookie.split(";"),d=0,c=b.length;d<c;d++)if(e=b[d].trim(),0===e.indexOf(a))return unescape(e.substr(a.length));return null};g.eatCookie=function(a){document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"};g.xhrRefresh=function(){var a;(new XHR).get(document.location.href,function(b){a=document.getElementsByTagName("body")[0];a.innerHTML=b;$m.forEach(a.getElementsByTagName("script"),function(a){a.innerHTML&&(new Function(a.innerHTML)).call(window)})})};
g.checkRatio=function(a,b,e){if(!b)return!1;var e=e.video.width/e.video.height,d=a.clientWidth/a.clientHeight;0.02>Math.abs(e-d)?($m.removeClass(a,La),$m.removeClass(a,sa)):d>e?($m.removeClass(a,sa),$m.addClass(a,La)):($m.removeClass(a,La),$m.addClass(a,sa));$m.removeClass(b,n)};g.mobileCanPlaySD=function(){return 2<=window.devicePixelRatio};g.getTimeOffset=function(a){var b=a.match(/t=([0-9hms:]+)/);null!==b&&(a=b[1]);var e=!1,d=0,c=0,h=0,i=0;if((b=a.match(/^([0-9]+)$/))&&b.length)e=!0,i=b[1];!1===
e&&(b=a.match(/^(([0-9]+)h)?(([0-9]+)m)?(([0-9]+)s)?/),null!==b&&""!==b[0]&&(e=!0,c=b[2],h=b[4],i=b[6]));!1===e&&(b=a.match(/^([0-9:]+)/),null!==b&&(a=a.split(":").reverse(),i=a[0],a[1]&&(h=a[1]),a[2]&&(c=a[2])));c&&(d+=3600*c);h&&(d+=60*h);i&&(d+=parseInt(i,10));return d};g.init||(g.init={queue:[],loaderAdded:!1,loader:function(){0<g.init.queue.length&&(0===screen.width||0===screen.height?(u.warn("Screen size is 0, waiting 250ms to try again"),setTimeout(g.init.loader,250)):g.init.queue.shift()())}});
window.Player=g;g.Moogaloop=MingClass.extend({init:function(a,b,e){function d(a,c,d){u.info("url: ",a);var e={server:C.request.vimeo_url,player_server:C.request.player_url,cdn_server:C.request.cdn_url,embed_location:C.request.referrer,force_embed:b.force_embed,force_info:b.force_info,moogaloop_type:ca,js_api:1,js_getConfig:b.ref_id+
".getConfig",js_setConfig:b.ref_id+".setConfig",clip_id:C.video.id,fullscreen:1},f={id:c.id,name:c.id,styleclass:B};l.ie&&(a=a+((a.indexOf("?")>0?"&":"?")+"time="+(new Date).getTime()));for(var h in d)d.hasOwnProperty(h)&&(e[h]=d[h]);swfobject.embedSWF(a,c.id,"100%","100%","10.0.0","/assets/flash/expressInstall.swf",e,{allowscriptaccess:"always",allowfullscreen:"true",scalemode:"noscale",quality:"high",wmode:"opaque",bgcolor:"#000000"},f,function(b){if(l.safari&&l.win){u.debug("Removing invisible from swfobject");
$m.removeClass(b.ref,B)}l.android&&l.android<2.2&&$m.removeClass(b.ref,B);setTimeout(function(){if($m.hasClass(c,Ga))return a.indexOf(y)===0?r.loverLoaded():r.moogaloopLoaded();if(A&&$m.hasClass(A,B))return a.indexOf(y)===0?r.loverThumbLoaded(true):r.moogaloopThumbLoaded(true)},2E3)})}function c(){setTimeout(function(){H.fire(rb)},0)}function h(){var c="cover"+e.uniqueId;J=document.getElementById(c);if(!J){J=document.createElement("div");J.setAttribute("id",c);$m.addClass(J,Hc);a.appendChild(J)}d(y,
J,{js_onLoad:b.ref_id+".player.loverLoaded",js_onThumbLoaded:b.ref_id+".player.loverThumbLoaded",js_setupMoog:b.ref_id+".player.loverInitiated"});C.embed.autoplay=1}function i(){var c="player"+e.uniqueId;I=document.getElementById(c);if(!I){I=document.createElement("div");I.setAttribute("id",c);a.appendChild(I)}d(x,I,{js_onLoad:b.ref_id+".player.moogaloopLoaded",js_onThumbLoaded:b.ref_id+".player.moogaloopThumbLoaded"})}function f(){if(C.embed.api.on&&m.length>0)for(;m.length>0;){var a=m.shift(),b=
"api_"+a.shift();u.debug("Calling",b,"from queue",a);(new Function("this."+b+'("'+a.join('","')+'")')).call(A)}}function g(){A&&A.api_pause()}function ba(){z?r.loverInitiated():A&&A.api_play()}function q(a){A&&A.api_seekTo(a.data)}function k(){A&&A.api_unload()}function t(a){C.embed.color=a.data;A&&A.api_changeColor(a.data)}function s(a){C.embed.loop=!!a.data;A&&A.api_setLoop(C.embed.loop)}function v(a){if(A){a=a.data;C.embed.api.version<2&&(a=a*100);A.api_setVolume(a)}}function o(a){var b=false;
switch(a.name){case ga:b=A?A.api_getCurrentTime().toFixed(3):0;break;case ha:b=A?A.api_getDuration().toFixed(3):C.video.duration;break;case Fa:b=A?A.api_getVolume().toFixed(3):C.request.cookie.volume/100;break;case ia:b=A?!!A.api_paused():true}F.sendBack(a.name,b)}function G(a){try{a.data=JSON.parse(a.data)}catch(c){}var d=C.embed.api.version<2?a.data:"on"+a.data.ucfirst();if(A){A.api_addEventListener(a.data,b.ref_id+".player."+d);u.debug("Adding listener",a.data,b.ref_id+".player."+d)}else{u.debug("Queuing listener",
a.data,b.ref_id+".player."+d);m.push(["addEventListener",a.data,b.ref_id+".player."+d])}}u.info("Options:",b);u.info("Config:",e.config);var r=this,C=e.config,l=e.ua,D=e.playerMode===Ja?Ta:e.playerMode,F=e.api,H=F.events,y=b.swfs.cover[D],x=b.swfs.player[D],m=[],K,J,I,z,A,ca=(D===na?"mobi":"mooga")+"loop"+(C.embed.on_site?"_local":"");r.config=C;u.info("swfUrl: ",x,"playerMode: ",D);C.embed.api.on&&H.bind(nb,g).bind(ob,ba).bind(pb,q).bind(qb,k).bind(Ea,t).bind(Ra,s).bind(Sa,v).bind(ga,o).bind(ha,
o).bind(Fa,o).bind(ia,o).bind(Za,G);r.onProgress=function(a){H.fire(hb,a.toFloat().toFixed(3))};r.onPlayProgress=function(a){H.fire(hb,{seconds:a.seconds.toFloat().toFixed(3),percent:a.percent.toFloat().toFixed(3),duration:a.duration.toFloat().toFixed(3)})};r.onLoading=function(a){H.fire(gb,{bytes:a.bytesLoaded.toInt(),percent:a.percent.toFloat().toFixed(3)})};r.onLoadProgress=function(a){H.fire(gb,{percent:a.percent.toFloat().toFixed(3),bytesLoaded:a.bytesLoaded.toInt(),bytesTotal:a.bytesTotal.toInt(),
duration:a.duration.toFloat().toFixed(3)})};r.onPlay=function(){H.fire(fb)};r.onPause=function(){H.fire(eb)};r.onSeek=function(a){H.fire(jb,C.embed.api.version<2?a.toFloat().toFixed(3):{seconds:a.seconds.toFloat().toFixed(3),percent:a.percent.toFloat().toFixed(3),duration:a.duration.toFloat().toFixed(3)})};r.onFinish=function(){H.fire(xb)};r.loverLoaded=function(){u.info("Lover loaded");$m.removeClass(a,Ga);z=document.getElementById("cover"+e.uniqueId);c();setTimeout(function(){if($m.hasClass(z,B)){u.debug("Removing invisible from loaded timeout");
r.loverThumbLoaded(true)}},jc)};r.loverThumbLoaded=function(a){u.info("Lover thumbnail loaded?",a);if(!z){z=document.getElementById("cover"+e.uniqueId);c()}$m.removeClass(z,B);$m.addClass(K,n)};r.loverInitiated=function(){u.debug("Lover play button clicked");i()};r.moogaloopLoaded=function(){$m.removeClass(a,Ga);A=document.getElementById(b.ref_id);if(z){$m.remove(z);$m.removeClass(A,B);z=null}else c();u.info("Welcome to Moogaloop!");setTimeout(function(){if($m.hasClass(A,B)){u.debug("Removing invisible from loaded timeout");
r.moogaloopThumbLoaded(true);f()}},jc);setTimeout(f,0)};r.moogaloopThumbLoaded=function(a){u.info("Moog thumbnail loaded?",a);A||(A=document.getElementById(b.ref_id));$m.removeClass(A,B);$m.addClass(K,n)};r.destroy=function(){C.embed.api.on&&H.unbind(nb,g).unbind(ob,ba).unbind(pb,q).unbind(qb,k).unbind(Ea,t).unbind(Ra,s).unbind(Sa,v).unbind(ga,o).unbind(ha,o).unbind(Fa,o)};for(K=a.getElementsByTagName("div")[0];K.nextSibling;)a.removeChild(K.nextSibling);!C.embed.on_site&&!C.embed.autoplay&&!C.embed.api.on&&
!l.opera&&!(D===na||C.security.privacy==="password")?h():i();a.parentNode.api_seekTo=function(a){q({data:a})}}});g.NoPlayer=MingClass.extend({init:function(a,b,e){function d(){var b=Math.round(a.clientWidth/2-p.clientWidth/2),
c=Math.round(a.clientHeight/2-p.clientHeight/2);p.style.left=b+"px";p.style.top=c+"px"}function c(){function a(){if(b.styleSheet.rules.length){b.styleSheet.cssText=b.styleSheet.cssText+s;return g()}setTimeout(a,100)}var b;b=document.createElement("link");b.rel="stylesheet";b.href=t;document.getElementsByTagName("head")[0].appendChild(b);a()}function h(){var a=document.createElement("link");a.rel="stylesheet";a.href=t;a.addEventListener("load",g,false);document.getElementsByTagName("head")[0].appendChild(a)}
function g(){var a=["Uh Oh!","D&rsquo;Oh!","Aw fiddlesticks!","Jeepers!","Oh dear!","Ouch!","Zoinks!","Awww, snap!","Blast!","Curses!","ACK!","Aw shucks.","Major bummer.","Dag-nab-it!","Aargh!","Boo-hoo!","&iexcl;Ay caramba!"],b=Math.floor(Math.random()*a.length);p.innerHTML='<div class="'+O+' noplayer"><h1>'+a[b]+'</h1><p>This video can&rsquo;t be played with your current setup. <br/>Please switch to a browser that provides native H.264 support</a> or install <a href="http://adobe.com/go/getflashplayer" target="_blank">Adobe Flash Player</a>.</p></div>';
setTimeout(function(){f.show()},100)}var f=this,p=a.children[3],u=a.children[4],q,k=new XHR,t=b.css_path,s="."+aa+"{background-color:black!important}."+aa+" ."+P+"{text-align:center;font-size:1.5em;width:90%}a {color: #00adef}a:hover{color: #F75342}."+aa+" ."+P+" ."+O+".noplayer p{line-height: 1.1em}";f.element=a;f.show=function(){var b=p.getElementsByTagName("div")[0];$m.removeClass(p,n);$m.removeClass(u,n);d();setTimeout(function(){$m.addClass(b,pa);$m.addClass(a,O)},10)};for(window.addEventListener?
window.addEventListener("resize",d,false):window.attachEvent("onresize",d);p.previousSibling;){if(p.previousSibling.className===Lb)break;a.removeChild(p.previousSibling)}$m.removeClass(a,Ga);(function(){e.ua.ie&&e.config.embed.on_site?c():e.ua.opera&&e.config.embed.on_site?h():k.get(t,function(a){q=a+s;a=document.createElement("style");if(e.ua.ie){a.type="text/css";a.styleSheet.cssText=q}else a.appendChild(document.createTextNode(q));document.getElementsByTagName("head")[0].appendChild(a);g()})})()}});g.API=MingClass.extend({init:function(a){function b(a,
b){a=a||{};b=b||false;if(k)a.player_id=k;a.data==="undefined"&&delete a.data;if(q>1&&window.JSON)return b?JSON.stringify(a):a;var c="method="+encodeURIComponent(a.method||a.event)+"&params=",d=[];if(a.value)d.push(encodeURIComponent(a.value));else if($m.type(a.data)==="object")for(var e in a.data)d.push(encodeURIComponent(a.data[e]));else a.data&&a.data!=="undefined"&&d.push(encodeURIComponent(a.data));a.player_id&&d.push(a.player_id);return c+d.join(",")}function e(a){if(!a||a==="")return false;
if(a.method)return a;try{return JSON.parse(a)}catch(b){var c={},d,e,f;a.split("&").forEach(function(a){d=a.split("=");e=decodeURIComponent(d[0]);f=decodeURIComponent(d[1]);if(e!=="id"){e==="params"&&(e="value");f.contains(",")&&(f=f.split(",")[0]);c[e]=f}});return c}}function d(a){if(window.parent!=window){$m.type(a)!=="string"&&(a=b(a,true));window.parent.postMessage(a,p)}if(t){$m.type(a)!=="string"&&(a=b(a,false));t(a)}u.debug("<- Sent",a)}function c(a){var b=a.name,c=a.data;try{c=JSON.parse(a.data)}catch(e){}if(q<
2){b=$m.findKey(b,v);switch(b){case "onSeek":case "onProgress":c.percent&&delete c.percent;case "onLoading":c.duration&&delete c.duration}}(g[b]===true||a.name===rb)&&d({event:b,data:c})}function h(a){var b=e(a.data),a=b.method,c=b.value;if(!b||!a)return false;if(a.substr(0,4)==="api_"){a=a.substr(4);a=r[a]||a;a=a.replace("()","")}b=a+"()";if(b===Za){g[c]=true;C.fire(Za,c);u.debug("-> Now listening for",c)}else if(b===$a){g[c]=false;C.fire($a,c);u.debug("-> Stop listening for",c)}else if(o.contains(b)){u.debug("-> Received",
a,c);switch(b){case Sa:c=c.toFloat();q<2&&(c=c/100);break;case Ra:c=!!c.toInt();break;case Ea:if(c.search(/^[A-Fa-f\d]+$/g)===-1||c.length!==3&&c.length!==6){u.warn("Invalid color value");return}}C.fire(b,c)}else if(G.contains(b)){u.debug("-> Received request for",a,c);C.fire(b,c)}}function i(b){var c=false;switch(b.name){case Bb:c=a.embed.color;break;case vb:c=a.video.url;break;case $b:c=a.video.embed_code}f.sendBack(b.name,c)}if(!a.embed.api.on){this.events=new EventManager;return false}if(!window.postMessage||
!window.parent.postMessage||window.location===window.parent.location&&!a.embed.on_site){u.info("Player API unavailable because this browser does not support postMessage or is not loaded in an iframe.");a.embed.api.on=0;this.events=new EventManager;return false}var f=this,p=decodeURIComponent(a.request.referrer),g={},q=a.embed.api.version,k=a.embed.api.player_id,t=null,s=[gb,hb,fb,eb,xb,jb,rb,Gc],v={onFinish:xb,onLoading:gb,onLoad:rb,onProgress:hb,onPlay:fb,onPause:eb,onSeek:jb},o=[Za,$a,ob,nb,Ea,
pb,Ra,Sa,qb],G=[ha,ga,Fa,Bb,zb,vb,$b,Pa,Qa,ia],r={changeColor:Ea},C=new EventManager;f.events=C;f.setCallback=function(b){a.embed.on_site&&(t=b)};f.send=function(b){a.embed.on_site&&h({data:b})};f.sendBack=function(a,b){a=a.replace("()","");q<2&&(a="api_"+a);d({method:a,value:b})};f.sendError=function(){u.error("API error")};f.destroy=function(){window.removeEventListener?window.removeEventListener("message",h,false):window.detachEvent("onmessage",h)};s.forEach(function(a){C.bind(a,c)});C.bind(Bb,
i).bind(vb,i).bind($b,i);window.addEventListener?window.addEventListener("message",h,false):window.attachEvent("onmessage",h)}});g.Stats=MingClass.extend({init:function(a,b){var e=b.playerType.ucfirst()+" "+b.playerMode.ucfirst(),d=window._gaq||[],c=null,h=b.playerType===xa?"local":"",i=(b.playerType===xa?"html5_"+b.playerMode:b.playerMode===na?"mobiloop":"moogaloop")+"_"+(a.embed.on_site?h:"embed");d.push(["pt._setAccount",a.analytics.ga_account]);this.clientLog=function(){var b=new XHR,c="//"+a.request.player_url+"/log/client",d=["request_signature="+
a.request.signature,"video="+ICanHas.video,"h264="+ICanHas.video.h264,"vp8="+ICanHas.video.vp8,"vp6="+ICanHas.video.vp6,"flash="+FlashDetect.version,"touch="+ICanHas.touch,"screen_width="+screen.width,"screen_height="+screen.height].join("&");b.post(c,d,function(){})};this.googleLog=function(b,c){c=parseInt(Number(c),10);isNaN(c)&&(c=void 0);u.log("google analytics:",e,b,a.video.id,c);d.push(["pt._trackEvent",e,b,a.video.id+"",c])};this.partialPlayLog=function(b,d,e){b=parseInt(b,10);if(b>c){var h=
new XHR,k="//"+a.request.player_url+"/log/partial",d="request_signature="+a.request.signature+"&seconds="+b+"&quality="+d;u.log("vimeo stats:",b,"seconds played");e?h.post(k,d):h.post(k,d,function(){});c=b}};this.vimeoLog=function(b,c,d,e){var h=new XHR,g="//"+a.request.player_url+"/log/"+b+"/"+a.video.id,s="?embed_location="+a.request.referrer+"&request_signature="+a.request.signature,s=s+("&type="+i);c&&(s+="&quality="+c);d&&(s+="&percent="+d);u.log("vimeo stats:",b,c,d);e?h.post(g,s):h.post(g,
s,function(){})}}});g.UI||(g.UI={});g.UI.CanvasElement=MingClass.extend({init:function(a){if(!a)return false;
this.element=a;this.origWidth=a.getAttribute("width");this.origHeight=a.getAttribute("height");this.width=this.origWidth*wb;this.height=this.origHeight*wb},draw:function(a,b,e,d,c){this.setData(a).setTranslation(b).setScale(e).setColor(d).setShadow(c);this.refresh();return this},setData:function(a){this.data=a;return this},setTranslation:function(a){this.translation=a;return this},setScale:function(a){this.scale=a;return this},setColor:function(a){this.color=a;return this},setShadow:function(a){this.shadow=
a;return this},refresh:function(){var a=this.data,b=this.shadow;try{if(!a||!this.element.getContext)return false}catch(e){return false}var d=this.scale||1,c=this.translation?$m.clone(this.translation):{x:0,y:0},h=this.color||"ffffff";this.element.attr({width:this.width,height:this.height});d=d*wb;c.x=c.x*wb;c.y=c.y*wb;var i=this.element.getContext("2d"),f;i.clearRect(0,0,this.width,this.height);i.save();i.translate(c.x,c.y);i.scale(d,d);i.fillStyle=i.strokeStyle="#"+h;if(b){i.shadowOffsetX=i.shadowOffsetY=
0;i.shadowBlur=10*wb;i.shadowColor="rgba(0,0,0,0.5)"}d=0;for(c=a.length;d<c;d++)for(f in a[d])(b=a[d][f])?$m.isArray(b)?i[f].apply(i,b):i[f]=b:i[f].apply(i);i.restore();return this}});